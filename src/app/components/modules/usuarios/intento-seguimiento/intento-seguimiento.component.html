<!--- CODIGO NUEVO A INSERTAR EN COMPONENTE -->
<p-dialog  [(visible)]="displayModalIntento" [modal]="true"  (onHide)="onModalHide()">
  <div style="text-align:center" *ngIf="ContactoNNA != {}">
    <app-intento

      (recargaPadre)="recargarHistorial()"

      [ContactoNNA]="ContactoNNA"
      [NNaCargado] = "NNaCargado"
      [seguimiento] = "seguimiento"

      (resetState)="resetChildState()"
    >
    </app-intento>
  </div>
</p-dialog>

<app-info-seguimiento-nna [idNNA]="nnaId"  />

<br>
<div style="text-align:right">
  <img src="iconos/agregarContacto.svg" (click)="nuevoContacto()"/>
</div>
<br>

<p-table [value]="contactos" [tableStyle]="{ 'min-width': '50rem' }"
[paginator]="true"
[rows]="10"
[paginatorPosition]="'bottom'"
[alwaysShowPaginator]="true"
[rowsPerPageOptions]="[5, 10, 20]">
  <ng-template pTemplate="header">
      <tr>
          <th id="a1">Contacto</th>
          <th id="a2">Parentesco</th>
          <th id="a3">Cuidador</th>
          <th id="a4">Correo electrónico</th>
          <th id="a5">Teléfono</th>
          <th id="a6">Intentos fallidos</th>
          <th id="a7">Intentos exitosos</th>
          <th id="a8">Agregar intento</th>
      </tr>
  </ng-template>
  <ng-template pTemplate="body" let-contactos>
      <tr class="custom-row-border">
          <td>{{ contactos.nombres }}</td>
          <td>{{ getNombreParentesco(contactos.parentescoId) }}</td>
          <td>{{ valor_cuidador(contactos.cuidador) }}</td>
          <td>{{ contactos.email }}</td>
          <td>{{ contactos.telefonos }}</td>
          <td>{{ contactos.tipoResultadoIntento1 }}</td>
          <td>{{ contactos.tipoResultadoIntento2 }}</td>
          <td><a (click) = "cargarIntento(contactos)"><img src="iconos/telefono.svg" alt="ojo"/></a></td>
      </tr>
  </ng-template>
</p-table>

<br>
<p class="titulo">Historial intentos</p>
<p-table [value]="intentos" [tableStyle]="{ 'min-width': '50rem' }"
[paginator]="true"
[rows]="10"
[paginatorPosition]="'bottom'"
[alwaysShowPaginator]="true"
[rowsPerPageOptions]="[5, 10, 20]">
  <ng-template pTemplate="header">
      <tr>
          <th id="a1">Contacto</th>
          <th id="a2">Parentesco</th>
          <th id="a3">Correo electrónico</th>
          <th id="a4">Teléfono</th>
          <th id="a5">Fecha y hora</th>
          <th id="a6">Tipo de intento</th>
          <th id="a7">Tipo de falla</th>
      </tr>
  </ng-template>
  <ng-template pTemplate="body" let-intentos>
      <tr class="custom-row-border">
          <td>{{ intentos.nombres }}</td>
          <td>{{ getNombreParentesco(intentos.parentescoId) }}</td>
          <td>{{ intentos.email }}</td>
          <td>{{ intentos.telefonos }}</td>
          <td>{{ intentos.fechaIntento | date: 'dd/MM/yyyy HH:mm:ss' }}</td>
          <td>{{ valor_tipoIntento(intentos.tipoFallaIntentoId) }}</td>
          <td>{{ intentos.tipoFallaIntentoNombre }}</td>

      </tr>
  </ng-template>
</p-table>



<p-dialog  [(visible)]="displayModalContacto" [modal]="true"  (onHide)="onModalHide()">

  <app-crear-nna-agregar-contacto [nnaFormCrearSinActivar]="nnaFormCrearSinActivar"
                    (dataToParent)="handleDataContacto($event)"></app-crear-nna-agregar-contacto>
</p-dialog>
